geom_spatvector(aes(fill = chl, size = chl))+
scale_fill_terrain_c()
#| label: fig-chl-value
#| fig-cap: The value of chlorophyll-a extracted from each generated random point
#|
pemba.data |>
ggplot() +
geom_spatvector(aes(fill = chl, size = chl))
#| label: fig-chl-value
#| fig-cap: The value of chlorophyll-a extracted from each generated random point
#|
pemba.data |>
ggplot() +
geom_spatvector(aes(color = chl, size = chl))
#| label: fig-map-point
#| fig-cap: The map of Pemba Channel showing the generated random points
#| fig-dpi: 300
#| warning: false
#| message: false
#| fig-width: 2
#| fig-height: 2
#|
ggplot()+
ggspatial::annotation_map_tile(type = "osm", zoom = 9)+
ggspatial::layer_spatial(data = pemba.data, color = chl)+
scale_x_continuous(breaks = seq(39,40,0.4),
labels = metR::LonLabel(lon = seq(39,40,0.4)))+
scale_y_continuous(breaks = seq(-5.6,-4.6,0.4),
labels = metR::LatLabel(lat = seq(-5.6,-4.6,0.4)))
#| label: fig-map-point
#| fig-cap: The map of Pemba Channel showing the generated random points
#| fig-dpi: 300
#| warning: false
#| message: false
#| fig-width: 2
#| fig-height: 2
#|
ggplot()+
ggspatial::annotation_map_tile(type = "osm", zoom = 9)+
ggspatial::layer_spatial(data = pemba.data, color = "chl")+
scale_x_continuous(breaks = seq(39,40,0.4),
labels = metR::LonLabel(lon = seq(39,40,0.4)))+
scale_y_continuous(breaks = seq(-5.6,-4.6,0.4),
labels = metR::LatLabel(lat = seq(-5.6,-4.6,0.4)))
#| label: fig-map-point
#| fig-cap: The map of Pemba Channel showing the generated random points
#| fig-dpi: 300
#| warning: false
#| message: false
#| fig-width: 2
#| fig-height: 2
#|
ggplot()+
ggspatial::annotation_map_tile(type = "osm", zoom = 9)+
ggspatial::layer_spatial(data = pemba.data)+
scale_x_continuous(breaks = seq(39,40,0.4),
labels = metR::LonLabel(lon = seq(39,40,0.4)))+
scale_y_continuous(breaks = seq(-5.6,-4.6,0.4),
labels = metR::LatLabel(lat = seq(-5.6,-4.6,0.4)))
#| label: fig-map-point
#| fig-cap: The map of Pemba Channel showing the generated random points
#| fig-dpi: 300
#| warning: false
#| message: false
#| fig-width: 2
#| fig-height: 2
#|
ggplot()+
ggspatial::annotation_map_tile(type = "osm", zoom = 9)+
ggspatial::layer_spatial(data = pemba.data)+
geom_spatvector(aes(color = chl, size = chl))
pemba.data
#| label: fig-map-point
#| fig-cap: The map of Pemba Channel showing the generated random points
#| fig-dpi: 300
#| warning: false
#| message: false
#| fig-width: 2
#| fig-height: 2
#|
ggplot()+
ggspatial::annotation_map_tile(type = "osm", zoom = 9)+
ggspatial::layer_spatial(data = pemba.data)+
scale_x_continuous(breaks = seq(39,40,0.4),
labels = metR::LonLabel(lon = seq(39,40,0.4)))+
scale_y_continuous(breaks = seq(-5.6,-4.6,0.4),
labels = metR::LatLabel(lat = seq(-5.6,-4.6,0.4)))
#| label: fig-map-point
#| fig-cap: The map of Pemba Channel showing the generated random points
#| fig-dpi: 300
#| warning: false
#| message: false
#| fig-width: 2
#| fig-height: 2
#|
ggplot()+
ggspatial::annotation_map_tile(type = "osm", zoom = 9, pallete="viridis")+
ggspatial::layer_spatial(data = pemba.data)+
scale_x_continuous(breaks = seq(39,40,0.4),
labels = metR::LonLabel(lon = seq(39,40,0.4)))+
scale_y_continuous(breaks = seq(-5.6,-4.6,0.4),
labels = metR::LatLabel(lat = seq(-5.6,-4.6,0.4)))
#| label: fig-chl-value
#| fig-cap: The value of chlorophyll-a extracted from each generated random point
#|
pemba.data |>
ggplot() +
geom_spatvector(aes(color = chl, size = chl, palette = "viridis"))
#| label: fig-chl-value
#| fig-cap: The value of chlorophyll-a extracted from each generated random point
#|
pemba.data |>
ggplot() +
geom_spatvector(aes(color = chl, size = chl), palette = "viridis")
#| label: fig-chl-value
#| fig-cap: The value of chlorophyll-a extracted from each generated random point
#|
pemba.data |>
ggplot() +
geom_spatvector(aes(color = chl, size = chl))+
scale_x_continuous(breaks = seq(39,40,0.4),
labels = metR::LonLabel(lon = seq(39,40,0.4)))+
scale_y_continuous(breaks = seq(-5.6,-4.6,0.4),
labels = metR::LatLabel(lat = seq(-5.6,-4.6,0.4)))
#| label: fig-chl-value
#| fig-cap: The value of chlorophyll-a extracted from each generated random point
#|
pemba.data |>
ggplot() +
geom_spatvector(aes(color = chl, size = chl))+
scale_x_continuous(breaks = seq(39,40,0.4),
labels = metR::LonLabel(lon = seq(39,40,0.4)))+
scale_y_continuous(breaks = seq(-5.6,-4.6,0.4),
labels = metR::LatLabel(lat = seq(-5.6,-4.6,0.4)))+
theme_bw()
pemba.df = spatSample(pemba |> select(chl),
size = 100,
method = "random",
na.rm = T,
# as.points = T,
as.df = T,
values = T,
xy = T) |>
rename(lon = x, lat = y)
pemba.df
pemba.df = spatSample(pemba |> select(chl),
size = 100,
method = "random",
na.rm = T,
# as.points = T,
as.df = T,
values = T,
xy = T) |>
rename(lon = x, lat = y) |>
as_tibble()
pemba.df
install.packages("rnaturalearth")
install.packages("rnaturalearthdata")
install.packages("rnaturalearthhires")
rnaturalearthdata::map_units110
#| label: fig-map-point
#| fig-cap: The map of Pemba Channel showing the generated random points
#| fig-dpi: 300
#| warning: false
#| message: false
#| fig-width: 2
#| fig-height: 2
#|
ggplot()+
ggspatial::annotation_map_tile(type = "osm")+
ggspatial::layer_spatial(data = pemba.data)+
scale_x_continuous(breaks = seq(39.2,40,0.4),
labels = metR::LonLabel(lon = seq(39.2,40,0.4)))+
scale_y_continuous(breaks = seq(-5.6,-4.6,0.4),
labels = metR::LatLabel(lat = seq(-5.6,-4.6,0.4)))
#| warning: false
#| message: false
#| comment: ""
#|
require(tidyterra)
require(terra)
require(sf)
require(tidyverse)
pemba = rast("pemba_crop.nc") |>
rename(flags = 1, chl = 2, land_mask = 3)
pemba
pemba |>
select(chl) |>
filter(chl < 1) |>
terra::plot()
pemba.data = spatSample(pemba |> select(chl),
size = 100,
method = "random",
na.rm = T,
as.points = T,
values = T)
pemba.data
#| label: fig-map-point
#| fig-cap: The map of Pemba Channel showing the generated random points
#| fig-dpi: 300
#| warning: false
#| message: false
#| fig-width: 1.5
#| fig-height: 1.5
#| comment: ""
#|
ggplot()+
ggspatial::annotation_map_tile(type = "osm", zoom = 8)+
ggspatial::layer_spatial(data = pemba.data)+
scale_x_continuous(breaks = seq(39.2,40,0.4),
labels = metR::LonLabel(lon = seq(39.2,40,0.4)))+
scale_y_continuous(breaks = seq(-5.6,-4.6,0.4),
labels = metR::LatLabel(lat = seq(-5.6,-4.6,0.4)))
#| label: fig-chl-value
#| fig-cap: The value of chlorophyll-a extracted from each generated random point
#| fig-width: 3.5
#| fig-height: 3.5
#|
pemba.data |>
ggplot() +
geom_spatvector(aes(color = chl, size = chl))+
scale_x_continuous(breaks = seq(39.2,40,0.4),
labels = metR::LonLabel(lon = seq(39.2,40,0.4)))+
scale_y_continuous(breaks = seq(-5.6,-4.6,0.4),
labels = metR::LatLabel(lat = seq(-5.6,-4.6,0.4)))+
theme_bw()
#| label: fig-chl-value
#| fig-cap: The value of chlorophyll-a extracted from each generated random point
#| fig-width: 3.5
#| fig-height: 3.5
#|
pemba.data |>
ggplot() +
geom_spatvector(aes(color = chl, size = chl))+
scale_x_continuous(breaks = seq(39.2,40,0.4),
labels = metR::LonLabel(lon = seq(39.2,40,0.4)))+
scale_y_continuous(breaks = seq(-5.6,-4.6,0.4),
labels = metR::LatLabel(lat = seq(-5.6,-4.6,0.4)))+
theme_bw() +
guides(fill = guide_colorbar(title = expression(Chl-a~(mgm^{-3})),
title.position = "right",
title.hjust = .5,
barwidth = 1.2,
barheight = 8,
label.theme = element_text(size = 10),
title.theme = element_text(angle = 90, size = 11)))
#| label: fig-chl-value
#| fig-cap: The value of chlorophyll-a extracted from each generated random point
#| fig-width: 3.5
#| fig-height: 3.5
#|
pemba.data |>
ggplot() +
geom_spatvector(aes(color = chl, size = chl))+
scale_x_continuous(breaks = seq(39.2,40,0.4),
labels = metR::LonLabel(lon = seq(39.2,40,0.4)))+
scale_y_continuous(breaks = seq(-5.6,-4.6,0.4),
labels = metR::LatLabel(lat = seq(-5.6,-4.6,0.4)))+
theme_bw() +
guides(fill = guide_colorbar(title = expression(Chl-a~(mgm^{-3})),
title.position = "right",
title.hjust = .5,
barwidth = 1.2,
barheight = 8,
label.theme = element_text(size = 10),
title.theme = element_text(angle = 90, size = 11)))
#| label: fig-chl-value
#| fig-cap: The value of chlorophyll-a extracted from each generated random point
#| fig-width: 3.5
#| fig-height: 3.5
#|
pemba.data |>
ggplot() +
geom_spatvector(aes(color = chl, size = chl))+
scale_x_continuous(breaks = seq(39.2,40,0.4),
labels = metR::LonLabel(lon = seq(39.2,40,0.4)))+
scale_y_continuous(breaks = seq(-5.6,-4.6,0.4),
labels = metR::LatLabel(lat = seq(-5.6,-4.6,0.4)))+
theme_bw()
#| fig-width: 3.5
#| fig-height: 3.5
#|
pemba |>
select(chl) |>
filter(chl < 1) |>
terra::plot()
pemba
pemba |>
ggplot() +
geom_spatraster()
pemba |>
ggplot() +
geom_spatraster(data = pemba)
pemba |>
ggplot() +
geom_spatraster(data = pemba |> select(lyr = chl))
pemba |>
ggplot() +
geom_spatraster(data = pemba |> select(lyr = chl) |> filter(chl < 1))
pemba
pemba |>
ggplot() +
geom_spatraster(data = pemba |>
select(lyr = chl) |>
filter(chl < 1))
pemba
ggplot() +
geom_spatraster(data = pemba |>
select(lyr = chl|>
filter(chl < 1)) )
ggplot() +
geom_spatraster(data = pemba |>
select(lyr = chl) )
ggplot() +
geom_spatraster(data = pemba |>
select(lyr = chl))|>
filter(value < 1)
ggplot() +
geom_spatraster(data = pemba |>
select(lyr = chl))|>
filter(value < 1)
ggplot() +
geom_spatraster(data = pemba |>
select(lyr = chl)|>
filter(value < 1))
ggplot() +
geom_spatraster(data = pemba |>
select(lyr = chl|>
filter(value < 1)))
ggplot() +
geom_spatraster(data = pemba |>
filter(value < 1))
ggplot() +
geom_spatraster(data = pemba |>
filter(chl < 1))
ggplot() +
geom_spatraster(data = pemba |>
filter(chl < 1) |>
select(lyr = chl))
ggplot() +
geom_spatraster(data = pemba |>
filter(chl < 1) |>
select(lyr = chl))+
scale_fill_gradientn(colours = oce::oceColors9A(120))
pemba.data
pemba.df = spatSample(pemba |> select(chl),
size = 200,
method = "random",
na.rm = T,
# as.points = T,
as.df = T,
values = T,
xy = T) |>
rename(lon = x, lat = y) |>
as_tibble()
pemba.df
pemba.df
ggplot() +
geom_spatraster(data = pemba |>
filter(chl < 1) |>
select(lyr = chl))+
scale_fill_gradientn(colours = oce::oceColors9A(120))+
geom_point(data = pemba.df)
ggplot() +
geom_spatraster(data = pemba |>
filter(chl < 1) |>
select(lyr = chl))+
scale_fill_gradientn(colours = oce::oceColors9A(120))+
geom_point(data = pemba.df, aes(x = lon, y = lat))
ggplot() +
geom_spatraster(data = pemba |>
filter(chl < 1) |>
select(lyr = chl))+
scale_fill_gradientn(colours = oce::oceColors9A(120))+
geom_point(data = pemba.df, aes(x = lon, y = lat))+
theme(legend.position = "none")
ggplot() +
geom_spatraster(data = pemba |>
filter(chl < 1) |>
select(lyr = chl))+
scale_fill_gradientn(colours = oce::oceColors9A(120))+
geom_point(data = pemba.df, aes(x = lon, y = lat))+
coord_sf(expand = F) +
theme(legend.position = "none")
#| fig-width: 3.5
#| fig-height: 3.5
#| fig-dpi: 300
#|
ggplot() +
geom_spatraster(data = pemba |>
filter(chl < 1) |>
select(lyr = chl))+
scale_fill_gradientn(colours = oce::oceColors9A(120))+
geom_point(data = pemba.df, aes(x = lon, y = lat))+
coord_sf(expand = F) +
theme(legend.position = "none")
#| fig-width: 3.5
#| fig-height: 3.5
#| fig-dpi: 300
#|
ggplot() +
geom_spatraster(data = pemba |>
filter(chl < 1) |>
select(lyr = chl))+
scale_fill_gradientn(colours = oce::oceColors9A(120))+
geom_point(data = pemba.df, aes(x = lon, y = lat))+
coord_sf(expand = F) +
theme(legend.position = "none")
ggsave("fig-point.png", dpi = 300, height = 3.5, width = 3.5)
#| fig-width: 3.5
#| fig-height: 3.5
#| fig-dpi: 300
#|
ggplot() +
geom_spatraster(data = pemba |>
filter(chl < 1) |>
select(lyr = chl))+
scale_fill_gradientn(colours = oce::oceColors9A(120))+
geom_point(data = pemba.df, aes(x = lon, y = lat))+
coord_sf(expand = F) +
theme(legend.position = "none",
axis.title = element_blank(),
axis.text = element_blank())
#| fig-width: 3.5
#| fig-height: 3.5
#| fig-dpi: 300
#|
ggplot() +
geom_spatraster(data = pemba |>
filter(chl < 1) |>
select(lyr = chl))+
scale_fill_gradientn(colours = oce::oceColors9A(120))+
geom_point(data = pemba.df, aes(x = lon, y = lat))+
coord_sf(expand = F) +
theme(legend.position = "none",
axis.title = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank())
ggsave("fig-point.png", dpi = 300, height = 3.5, width = 3.5)
#| fig-width: 3.5
#| fig-height: 3.5
#| fig-dpi: 300
#|
ggplot() +
geom_spatraster(data = pemba |>
filter(chl < 1) |>
select(lyr = chl))+
scale_fill_gradientn(colours = oce::oceColors9A(120))+
geom_point(data = pemba.df, aes(x = lon, y = lat))+
coord_sf(expand = F) +
theme(legend.position = "none",
axis.title = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank())
# ggsave("fig-point.png", dpi = 300, height = 3.5, width = 3.5)
#| fig-width: 3.5
#| fig-height: 3.5
#| fig-dpi: 300
#|
ggplot() +
geom_spatraster(data = pemba |>
filter(chl < 1) |>
select(lyr = chl))+
scale_fill_gradientn(colours = oce::oceColors9A(120))+
coord_sf(expand = F) +
theme(legend.position = "none",
axis.title = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank())
# ggsave("fig-point.png", dpi = 300, height = 3.5, width = 3.5)
#| fig-width: 2.5
#| fig-height: 2.5
#| fig-dpi: 300
#|
ggplot() +
geom_spatraster(data = pemba |>
filter(chl < 1) |>
select(lyr = chl))+
scale_fill_gradientn(colours = oce::oceColors9A(120))+
coord_sf(expand = F) +
theme(legend.position = "none",
axis.title = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank())
#| fig-width: 1
#| fig-height: 1
#| fig-dpi: 300
#|
ggplot() +
geom_spatraster(data = pemba |>
filter(chl < 1) |>
select(lyr = chl))+
scale_fill_gradientn(colours = oce::oceColors9A(120))+
coord_sf(expand = F) +
theme(legend.position = "none",
axis.title = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank())
#| label: fig-chl-value
#| fig-cap: The value of chlorophyll-a extracted from each generated random point
#| fig-width: 3.5
#| fig-height: 3.5
#| fig-dpi: 300
#|
pemba.data |>
ggplot() +
geom_spatvector(aes(color = chl, size = chl))+
scale_x_continuous(breaks = seq(39.2,40,0.4),
labels = metR::LonLabel(lon = seq(39.2,40,0.4)))+
scale_y_continuous(breaks = seq(-5.6,-4.6,0.4),
labels = metR::LatLabel(lat = seq(-5.6,-4.6,0.4)))+
theme_bw()
